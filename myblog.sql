-- phpMyAdmin SQL Dump
-- version 4.7.3
-- https://www.phpmyadmin.net/
--
-- Host: localhost
-- Generation Time: 2018-01-22 17:15:28
-- 服务器版本： 5.7.18-log
-- PHP Version: 7.0.21

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET AUTOCOMMIT = 0;
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `myblog`
--

-- --------------------------------------------------------

--
-- 表的结构 `blog_form`
--

CREATE TABLE `blog_form` (
  `id` int(10) NOT NULL,
  `uname` varchar(200) DEFAULT NULL,
  `tid` int(10) DEFAULT NULL,
  `aid` int(10) NOT NULL,
  `title` varchar(600) NOT NULL,
  `content` mediumtext NOT NULL,
  `addtime` int(12) DEFAULT NULL,
  `addip` int(12) DEFAULT NULL,
  `classid` int(10) DEFAULT NULL,
  `replycount` int(12) DEFAULT '0',
  `hits` int(12) NOT NULL DEFAULT '0',
  `istop` tinyint(2) NOT NULL DEFAULT '0',
  `elite` tinyint(2) NOT NULL DEFAULT '0',
  `ishot` tinyint(2) NOT NULL DEFAULT '0',
  `rate` smallint(3) NOT NULL DEFAULT '0',
  `attachment` smallint(3) DEFAULT NULL,
  `isdel` tinyint(2) NOT NULL DEFAULT '0',
  `style` char(10) DEFAULT NULL,
  `isdisplay` tinyint(2) NOT NULL DEFAULT '0',
  `fphoto` varchar(100) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

--
-- 转存表中的数据 `blog_form`
--

INSERT INTO `blog_form` (`id`, `uname`, `tid`, `aid`, `title`, `content`, `addtime`, `addip`, `classid`, `replycount`, `hits`, `istop`, `elite`, `ishot`, `rate`, `attachment`, `isdel`, `style`, `isdisplay`, `fphoto`) VALUES
(1, 'SINMON', 0, 1, 'php底层工作原理', '<p>\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">从图上可以看出，php从下到上是一个4层体系</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">①zend引擎</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">zend整体用纯c实现，是php的内核部分，它将php代码翻译（词法、语法解析等一系列编译过程）为可执行opcode的处理并实现相应的处理方法、实现了基本的数据结构（如hashtable、oo）、内存分配及管理、提供了相应的api方法供外部调用，是一切的核心，所有的外围功能均围绕zend实现。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">②extensions</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">围绕着zend引擎，extensions通过组件式的方式提供各种基础服务，我们常见的各种内置函数（如array系列）、标准库等都是通过extension来实现，用户也可以根据需要实现自己的extension以达到功能扩展、性能优化等目的（如贴吧正在使用的php中间层、富文本解析就是extension的典型应用）。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">③sapi</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi全称是server application programming interface，也就是服务端应用编程接口，sapi通过一系列钩子函数，使得php可以和外围交互数据，这是php非常优雅和成功的一个设计，通过sapi成功的将php本身和上层应用解耦隔离，php可以不再考虑如何针对不同应用进行兼容，而应用本身也可以针对自己的特点实现不同的处理方式。后面将在sapi章节中介绍</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">④上层应用</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">这就是我们平时编写的php程序，通过不同的sapi方式得到各种各样的应用模式，如通过webserver实现web应用、在命令行下以脚本方式运行等等。</span></p>', 1444300743, -1062731039, 5, 0, 112, 0, 3, 1, 0, NULL, 0, NULL, 0, '/public/index/images/1.jpg'),
(2, 'SINMON', 0, 2, '深入理解php原理之opcodes', '<table cellpadding=\"0\" cellspacing=\"0\" style=\"word-wrap: break-word; empty-cells: show; border-collapse: collapse; table-layout: fixed; width: 1141px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; line-height: 18px;\">\r\n  <tbody style=\"word-wrap: break-word;\">\r\n    <tr style=\"word-wrap: break-word;\">\r\n     <td class=\"t_f\" id=\"postmessage_555349\" style=\"word-wrap: break-word; font-size: 14px;\">\r\n        &middot; 作者:laruence(<a href=\"http://www.laruence.com/\" style=\"word-wrap: break-word; color: rgb(30, 84, 127);\" target=\"_blank\">http://www.laruence.com/)</a><br style=\"word-wrap: break-word;\" />\r\n        &middot; 本文地址:&nbsp;<a href=\"http://www.laruence.com/2008/06/18/221.html\" style=\"word-wrap: break-word; color: rgb(30, 84, 127);\" target=\"_blank\">http://www.laruence.com/2008/06/18/221.html</a><br style=\"word-wrap: break-word;\" />\r\n        &middot; 转载请注明出处&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<br style=\"word-wrap: break-word;\" />\r\n        &nbsp; &nbsp; 最近要给yahoo的同事们做一个关于php和apache处理请求的内部机制的讲座，刚好写了些关于opcodes的文字，就发上来了，这个文章基于 sara golemon的 understanding opcode<br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp; opcode是一种php脚本编译后的中间语言，就像java的bytecode,或者.net的msl，举个例子，比如你写下了如下的php代码：<br style=\"word-wrap: break-word;\" />\r\n       <font color=\"blue\" style=\"word-wrap: break-word;\">&lt;?php</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"green\" style=\"word-wrap: break-word;\">echo</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"#8b0000\" style=\"word-wrap: break-word;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word;\">hello world</font><font color=\"#8b0000\" style=\"word-wrap: break-word;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word;\">;<br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;</font><font color=\"#008b00\" style=\"word-wrap: break-word;\">$a</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;+&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"gray\" style=\"word-wrap: break-word;\">;<br style=\"word-wrap: break-word;\" />\r\n        &nbsp; &nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">echo</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"#008b00\" style=\"word-wrap: break-word;\">$a</font><font color=\"gray\" style=\"word-wrap: break-word;\">;</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"blue\" style=\"word-wrap: break-word;\">?&gt;</font><br style=\"word-wrap: break-word;\" />\r\n       <br style=\"word-wrap: break-word;\" />\r\n       &nbsp;&nbsp;php执行这段代码会经过如下4个步骤(确切的来说，应该是php的语言引擎zend)<br style=\"word-wrap: break-word;\" />\r\n        1.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;scanning(lexing) ,将php代码转换为语言片段(tokens)<br style=\"word-wrap: break-word;\" />\r\n       2.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;parsing, 将tokens转换成简单而有意义的表达式<br style=\"word-wrap: break-word;\" />\r\n       3.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;compilation, 将表达式编译成opocdes<br style=\"word-wrap: break-word;\" />\r\n       4.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;execution, 顺次执行opcodes，每次一条，从而实现php脚本的功能。<br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;题外话:现在有的cache比如apc,可以使得php缓存住opcodes，这样，每次有请求来临的时候，就不需要重复执行前面3步，从而能大幅的提高php的执行速度。<br style=\"word-wrap: break-word;\" />\r\n       那什么是lexing? 学过编译原理的同学都应该对编译原理中的词法分析步骤有所了解，lex就是一个词法分析的依据表。zend/zend_language_scanner.c会根据zend/zend_language_scanner.l(lex文件),来对输入的php代码进行词法分析，从而得到一个一个的&ldquo;词&rdquo;，php4.2开始提供了一个函数叫token_get_all,这个函数就可以讲一段php代码scanning成tokens；<br style=\"word-wrap: break-word;\" />\r\n       &nbsp;&nbsp;如果用这个函数处理我们开头提到的php代码，将会得到如下结果:<br style=\"word-wrap: break-word;\" />\r\n        <font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">367</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">316</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">echo</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">2</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">370</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;<br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">3</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">315</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"#8b0000\" style=\"word-wrap: break-word;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word;\">hello world</font><font color=\"#8b0000\" style=\"word-wrap: break-word;\">&quot;</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">4</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt; ;<br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">5</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">370</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;<br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">6</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt; =<br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">7</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">370</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;<br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">8</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">305</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">9</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">370</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;<br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">10</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt; +<br style=\"word-wrap: break-word;\" />\r\n       <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">11</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">370</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;<br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">12</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">305</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">13</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt; ;<br style=\"word-wrap: break-word;\" />\r\n       <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">14</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">370</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;<br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">15</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">316</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">echo</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">16</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">370</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;<br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">17</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt; ;</font><br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"gray\" style=\"word-wrap: break-word;\">?&gt;</font><br style=\"word-wrap: break-word;\" />\r\n       <br style=\"word-wrap: break-word;\" />\r\n       分析这个返回结果我们可以发现，源码中的字符串，字符，空格，都会原样返回。每个源代码中的字符，都会出现在相应的顺序处。而，其他的比如标签，操作符，语句，都会被转换成一个包含俩部分的array: token id(也就是在zend内部的改token的对应码，比如,t_echo,t_string)，和源码中的原来的内容。<br style=\"word-wrap: break-word;\" />\r\n       &nbsp;&nbsp;接下来，就是parsing阶段了，parsing首先会丢弃tokens array中的多于的空格，然后将剩余的tokens转换成一个一个的简单的表达式<br style=\"word-wrap: break-word;\" />\r\n        1.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;echo a constant string<br style=\"word-wrap: break-word;\" />\r\n        2.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;add two numbers together<br style=\"word-wrap: break-word;\" />\r\n        3.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;store the result of the prior expression to a variable<br style=\"word-wrap: break-word;\" />\r\n        4.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;echo a variable<br style=\"word-wrap: break-word;\" />\r\n       然后就改compilation阶段了，它会把tokens编译成一个个op_array, 每个op_arrayd包含如下5个部分：<br style=\"word-wrap: break-word;\" />\r\n       1.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;opcode数字的标识，指明了每个op_array的操作类型，比如add , echo<br style=\"word-wrap: break-word;\" />\r\n       2.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;结果&nbsp; &nbsp;&nbsp; &nbsp; 存放opcode结果<br style=\"word-wrap: break-word;\" />\r\n       3.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;操作数1&nbsp;&nbsp;给opcode的操作数<br style=\"word-wrap: break-word;\" />\r\n       4.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;操作数2<br style=\"word-wrap: break-word;\" />\r\n        5.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;扩展值&nbsp; &nbsp;1个整形用来区别被重载的操作符<br style=\"word-wrap: break-word;\" />\r\n       &nbsp;&nbsp;比如，我们的php代码会被parsing成:<br style=\"word-wrap: break-word;\" />\r\n       <font color=\"gray\" style=\"word-wrap: break-word;\">*&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word;\">zend_echo</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp; &nbsp;&nbsp;&nbsp;&#39;</font><font color=\"blue\" style=\"word-wrap: break-word;\">hello</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"blue\" style=\"word-wrap: break-word;\">world</font><font color=\"gray\" style=\"word-wrap: break-word;\">&#39;<br style=\"word-wrap: break-word;\" />\r\n        &nbsp; &nbsp; *&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word;\">zend_add</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp; &nbsp;&nbsp; &nbsp; ~</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp; &nbsp; *&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word;\">zend_assign</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;&nbsp;!</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;~</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp; &nbsp; *&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word;\">zend_echo</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp; &nbsp;&nbsp;&nbsp;!</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       呵呵，你可能会问了，我们的$a去那里了？<br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp; &nbsp; 恩，这个要介绍操作数了，每个操作数都是由以下俩个部分组成：<br style=\"word-wrap: break-word;\" />\r\n       a)&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;op_type : 为is_const, is_tmp_var, is_var, is_unused, or is_cv<br style=\"word-wrap: break-word;\" />\r\n        b)&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;u,一个联合体，根据op_type的不同，分别用不同的类型保存了这个操作数的值(const)或者左值(var)<br style=\"word-wrap: break-word;\" />\r\n        &nbsp; &nbsp;&nbsp; &nbsp; 而对于var来说，每个var也不一样<br style=\"word-wrap: break-word;\" />\r\n        &nbsp; &nbsp;&nbsp; &nbsp; is_tmp_var, 顾名思义，这个是一个临时变量，保存一些op_array的结果，以便接下来的op_array使用，这种的操作数的u保存着一个指向变量表的一个句柄（整数），这种操作数一般用~开头，比如~0,表示变量表的0号未知的临时变量<br style=\"word-wrap: break-word;\" />\r\n        is_var 这种就是我们一般意义上的变量了,他们以$开头表示<br style=\"word-wrap: break-word;\" />\r\n        is_cv 表示ze2.1/php5.1以后的编译器使用的一种cache机制，这种变量保存着被它引用的变量的地址，当一个变量第一次被引用的时候，就会被cv起来，以后对这个变量的引用就不需要再次去查找active符号表了，cv变量以！开头表示。<br style=\"word-wrap: break-word;\" />\r\n        &nbsp; &nbsp;这么看来，我们的$a被优化成!0了。</td>\r\n    </tr>\r\n </tbody>\r\n</table>\r\n<p>\r\n &nbsp;</p>', 1444300799, -1062731039, 5, 0, 10, 0, 2, 1, 0, NULL, 0, NULL, 0, '/public/index/images/2.jpg');
INSERT INTO `blog_form` (`id`, `uname`, `tid`, `aid`, `title`, `content`, `addtime`, `addip`, `classid`, `replycount`, `hits`, `istop`, `elite`, `ishot`, `rate`, `attachment`, `isdel`, `style`, `isdisplay`, `fphoto`) VALUES
(3, 'SINMON', 0, 3, 'seaslog: 高效、便捷、稳定的php日志扩展', '<p>\r\n  <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">简介</span><span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">为什么使用seaslog</span></p>\r\n<div align=\"left\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n <font style=\"word-wrap: break-word; color: rgb(51, 51, 51);\"><font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\">log日志，通常是系统或软件、应用的运行记录。通过log的分析，可以方便用户了解系统或软件、应用的运行情况；如果你的应用log足够丰富，也可以分析以往用户的操作行为、类型喜好、地域分布或其他更多信息；如果一个应用的log同时也分了多个级别，那么可以很轻易地分析得到该应用的健康状况，及时发现问题并快速定位、解决问题，补救损失。</font></font></font></div>\r\n<div align=\"left\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n  <font style=\"word-wrap: break-word; color: rgb(51, 51, 51);\"><font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\">php内置error_log、syslog函数功能强大且性能极好，但由于各种缺陷(error_log无错误级别、无固定格式，syslog不分模块、与系统日志混合)，灵活度降低了很多，不能满足应用需求。</font></font></font></div>\r\n<div align=\"left\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n <font style=\"word-wrap: break-word; color: rgb(51, 51, 51);\"><font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\">好消息是，有不少第三方的log类库弥补了上述缺陷，如log4php、plog、analog等(当然也有很多应用在项目中自己开发的log类)。其中以<font style=\"word-wrap: break-word; color: rgb(65, 131, 196);\">log4php</font>最为著名，设计精良、格式完美、文档完善、功能强大。推荐。(log4php的性能有待测试)</font></font></font></div>\r\n<div align=\"left\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n <font style=\"word-wrap: break-word; color: rgb(51, 51, 51);\"><font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\">那么有没有一种log类库满足以下需求呢：</font></font></font></div>\r\n<ul style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n  <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    分模块、分级别</li>\r\n  <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    配置简单(最好是勿须配置)</li>\r\n  <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    日志格式清晰易读</li>\r\n <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    应用简单、性能很棒</li>\r\n</ul>\r\n<div align=\"left\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n  <font style=\"word-wrap: break-word; color: rgb(51, 51, 51);\"><font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\">seaslog 正是应此需求而生。</font></font></font></div>\r\n<p>\r\n  <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">目前提供了什么</span></p>\r\n<ul style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    在php项目中便捷、规范地记录log</li>\r\n <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    可配置的默认log目录与模块</li>\r\n <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    指定log目录与获取当前配置</li>\r\n <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    初步的分析预警框架</li>\r\n  <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    高效的日志缓冲、便捷的缓冲debug</li>\r\n</ul>\r\n<p>\r\n <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">目标是怎样的</span></p>\r\n<ul style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n  <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    便捷、规范的log记录</li>\r\n  <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    高效的海量log分析</li>\r\n <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    可配置、多途径的log预警</li>\r\n</ul>\r\n<p>\r\n  <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">安装</span><span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">编译安装 seaslog</span></p>\r\n<div class=\"blockcode\" style=\"word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); background: url(http://bbs.phpchina.com/template/yeei_dream1/css/yeei//codebg.gif) 0px 0px repeat-y rgb(247, 247, 247);\">\r\n  <div id=\"code_kjo\" style=\"word-wrap: break-word;\">\r\n    <ol style=\"word-wrap: break-word; margin: 0px 0px 0px 10px !important; padding-right: 0px !important; padding-left: 0px !important;\">\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#008080\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">$ /path/to/phpize</span></font></font></font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#008080\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">$ ./configure --with-php-config=/path/to/php-config</span></font></font></font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#008080\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">$ make &amp;&amp; make install</span></font></font></font></li>\r\n   </ol>\r\n </div>\r\n  <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#008080\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\"><span style=\"word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(30, 84, 127) !important;\">复制代码</span></span></font></font></font></div>\r\n<p>\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">seaslog.ini的配置</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n &nbsp;</p>\r\n<div class=\"blockcode\" style=\"word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); background: url(http://bbs.phpchina.com/template/yeei_dream1/css/yeei//codebg.gif) 0px 0px repeat-y rgb(247, 247, 247);\">\r\n  <div id=\"code_fii\" style=\"word-wrap: break-word;\">\r\n    <ol style=\"word-wrap: break-word; margin: 0px 0px 0px 10px !important; padding-right: 0px !important; padding-left: 0px !important;\">\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#001000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">; configuration for php seaslog module</span></font></font></font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#001000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">extension = seaslog.so</span></font></font></font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#001000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">seaslog.default_basepath = /log/seaslog-test&nbsp; &nbsp; ;默认log根目录</span></font></font></font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#001000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">seaslog.default_logger = default&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; ;默认logger目录</span></font></font></font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#001000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">seaslog.disting_type = 1&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;;是否以type分文件 1是 0否(默认)</span></font></font></font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#001000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">seaslog.disting_by_hour = 1&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;;是否每小时划分一个文件 1是 0否(默认)</span></font></font></font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#001000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">seaslog.use_buffer = 1&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;;是否启用buffer 1是 0否(默认)</span></font></font></font></li>\r\n    </ol>\r\n </div>\r\n  <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#001000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\"><span style=\"word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(30, 84, 127) !important;\">复制代码</span></span></font></font></font></div>\r\n<p>\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n &nbsp;</p>\r\n<blockquote style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n <div align=\"left\" style=\"word-wrap: break-word;\">\r\n   seaslog.disting_type = 1 开启以type分文件，即log文件区分info\\warn\\erro</div>\r\n  <div align=\"left\" style=\"word-wrap: break-word;\">\r\n   seaslog.disting_by_hour = 1 开启每小时划分一个文件</div>\r\n <div align=\"left\" style=\"word-wrap: break-word;\">\r\n   seaslog.use_buffer = 1 开启buffer。默认关闭。当开启此项时，日志预存于内存，当请求结束时(或异常退出时)一次写入文件。</div>\r\n</blockquote>\r\n<p>\r\n <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">使用</span><span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">常量与函数</span><span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">常量列表</span></p>\r\n<ul style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    seaslog_type_info = 1</li>\r\n  <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    seaslog_type_warn = 2</li>\r\n  <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    seaslog_type_erro = 3</li>\r\n</ul>\r\n<p>\r\n  <font style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px; color: rgb(51, 51, 51);\"><font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><font style=\"word-wrap: break-word; color: rgb(0, 134, 179);\">var_dump</font>(seaslog_type_info,seaslog_type_warn,seaslog_type_erro);<font style=\"word-wrap: break-word; color: rgb(153, 153, 136);\"><i style=\"word-wrap: break-word;\">/*</i></font><font style=\"word-wrap: break-word; color: rgb(153, 153, 136);\"><i style=\"word-wrap: break-word;\">int(1) info类型</i></font><font style=\"word-wrap: break-word; color: rgb(153, 153, 136);\"><i style=\"word-wrap: break-word;\">int(2) warn类型</i></font><font style=\"word-wrap: break-word; color: rgb(153, 153, 136);\"><i style=\"word-wrap: break-word;\">int(3) erro类型</i></font><font style=\"word-wrap: break-word; color: rgb(153, 153, 136);\"><i style=\"word-wrap: break-word;\">*/</i></font></font></font></font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">函数列表</span></p>', 1444300876, -1062731039, 5, 0, 7, 0, 3, 0, 0, NULL, 0, NULL, 0, '/public/index/images/3.jpg');
INSERT INTO `blog_form` (`id`, `uname`, `tid`, `aid`, `title`, `content`, `addtime`, `addip`, `classid`, `replycount`, `hits`, `istop`, `elite`, `ishot`, `rate`, `attachment`, `isdel`, `style`, `isdisplay`, `fphoto`) VALUES
(4, 'SINMON', 0, 4, '深入理解zend sapis(zend sapi internals)', '<p>\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&middot; 作者:laruence(</span><a href=\"http://www.laruence.com/\" style=\"word-wrap: break-word; color: rgb(30, 84, 127); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" target=\"_blank\">http://www.laruence.com/)</a><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&middot; 本文地址:&nbsp;</span><a href=\"http://www.laruence.com/2008/08/12/180.html\" style=\"word-wrap: break-word; color: rgb(30, 84, 127); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" target=\"_blank\">http://www.laruence.com/2008/08/12/180.html</a><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&middot; 转载请注明出处&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;sapi:server abstractionapi，研究过php架构的同学应该知道这个东东的重要性，它提供了一个接口，使得php可以和其他应用进行交互数据。本文不会详细介绍每个php的sapi，只是针对最简单的cgi sapi，来说明sapi的机制。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">首先，我们来看看php的架构图：</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <a href=\"http://www.laruence.com/wp-content/uploads/php-arch.jpg\" style=\"word-wrap: break-word; color: rgb(30, 84, 127); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" target=\"_blank\"><img alt=\"\" border=\"0\" class=\"zoom\" file=\"http://www.laruence.com/wp-content/uploads/php-arch-293x300.jpg\" height=\"300\" id=\"aimg_n285e\" lazyloaded=\"true\" src=\"http://www.laruence.com/wp-content/uploads/php-arch-293x300.jpg\" style=\"word-wrap: break-word; border: none; cursor: pointer;\" width=\"293\" /></a><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php架构图</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">图1 php architecture</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi提供了一个和外部通信的接口，对于php5.2，默认提供了很多种sapi，常见的给apache的mod_php5，cgi，给iis的isapi，还有shell的cli，本文就从cgi sapi入手，介绍sapi的机制。 虽然cgi简单，但是不用担心，它包含了绝大部分内容，足以让你深刻理解sapi的工作原理。要定义个sapi，首先要定义个sapi_module_struct,&nbsp;&nbsp;查看 php-src/sapi/cgi/cgi_main.c:</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*/</font><br style=\"word-wrap: break-word;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_module_struct</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">cgi_sapi_module</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#if</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_fastcgi</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">cgi-fcgi</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* name */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">cgi/fastcgi</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* pretty name */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#else</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">cgi</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* name */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">cgi</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* pretty name */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#endif</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_cgi_startup</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* startup */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_module_shutdown_wrapper</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* shutdown */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">null</span><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* activate */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_deactivate</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* deactivate */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgibin_ub_write</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* unbuffered write */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgibin_flush</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* flush */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">null</span><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* get uid */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgibin_getenv</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* getenv */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_error</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* error handler */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">null</span><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* header handler */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_send_headers</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* send headers handler */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">null</span><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* send header handler */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_read_post</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* read post data */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_read_cookies</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* read cookies */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_register_variables</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* register server variables */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_log_message</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* log message */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">null</span><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* get request time */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">standard_sapi_module_properties</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; 这个结构，包含了一些常量，比如name, 这个会在我们调用php_info()的时候被使用。一些初始化，收尾函数，以及一些函数指针，用来告诉zend，如何获取，和输出数据。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">1. php_cgi_startup， 当一个应用要调用php的时候，这个函数会被调用，对于cgi来说，它只是简单的调用了php的初始化函数：static</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">int</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_cgi_startup</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_module_struct</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_module</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_module_startup</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_module</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">null</span><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;==&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">failure</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">failure</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">success</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">2. php_module_shutdown_wrapper ， 一个对php关闭函数的简单包装。只是简单的调用php_module_shutdown;3.php会在每个request的时候，处理一些初始化，资源分配的事务。这部分就是activate字段要定义的，从上面的结构我们可以看出，对于cgi来说，它并没有提供初始化处理句柄。对于mod_php来说，那就不同了，他要在apache的pool中注册资源析构函数， 申请空间，初始化环境变量，等等等等。4. sapi_cgi_deactivate, 这个是对应与activate的函数，顾名思义，它会提供一个handler, 用来处理收尾工作，对于cgi来说，他只是简单的刷新缓冲区，用以保证用户在zend关闭前得到所有的输出数据：</span><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">int</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_deactivate</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_d</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* flush only when sapi was started. the reasons are:<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;1. sapi deactivate is called from two places: module init and request shutdown<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;2. when the first call occurs and the request is not set up, flush fails on<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;fastcgi.<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp; */</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_started</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">))</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgibin_flush</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">server_context</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">))</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">success</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">5. sapi_cgibin_ub_write, 这个hanlder告诉了zend，如何输出数据，对于mod_php来说，这个函数提供了一个向response数据写的接口，而对于cgi来说，只是简单的写到stdout：</span><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">inline</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">size_t</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgibin_single_write</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">const</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">uint</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str_length</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_dc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#ifdef php_write_stdout</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">long</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#else</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">size_t</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#endif</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#if php_fastcgi</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_is_fastcgi</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">())</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">server_context</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">long</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_write</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_stdout</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str_length</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&lt;=&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#endif</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#ifdef php_write_stdout</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">write</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">stdout_fileno</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str_length</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&lt;=&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#else</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fwrite</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">1</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">min</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str_length</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">16384</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">stdout</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#endif</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">int</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgibin_ub_write</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">const</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">uint</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str_length</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_dc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">const</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ptr</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">uint</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">remaining</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str_length</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">size_t</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">while</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">remaining</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgibin_single_write</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ptr</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">remaining</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_cc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">!</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_handle_aborted_connection</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">()</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str_length</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;-&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">remaining</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ptr</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;+=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">remaining</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;-=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str_length</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">把真正的写的逻辑剥离出来，就是为了简单实现兼容fastcgi的写方式。&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">6. sapi_cgibin_flush, 这个是提供给zend的刷新缓存的函数句柄，对于cgi来说，只是简单的调用系统提供的fflush;7.null， 这部分用来让zend可以验证一个要执行脚本文件的state，从而判断文件是否据有执行权限等等，cgi没有提供。8. sapi_cgibin_getenv,为zend提供了一个根据name来查找环境变量的接口，对于mod_php5来说，当我们在脚本中调用getenv的时候，就会间接的调用这个句柄。而对于cgi来说，因为他的运行机制和cli很类似，直接调用父级是shell， 所以，只是简单的调用了系统提供的genenv:</span><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgibin_getenv</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">name</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">size_t</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">name_len</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_dc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#if php_fastcgi</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* when php is started by mod_fastcgi, no regular environment<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp; is provided to php.&nbsp;&nbsp;it is always sent to php at the start<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp; of a request.&nbsp;&nbsp;so we have to do our own lookup to get env<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp; vars.&nbsp;&nbsp;this could probably be faster somehow.&nbsp;&nbsp;*/</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_is_fastcgi</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">())</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">server_context</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_getenv</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">name</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">name_len</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#endif</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/*&nbsp;&nbsp;if cgi, or fastcgi and not found in fcgi env<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;check the regular environment */</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">getenv</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">name</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">9. php_error, 错误处理函数, 到这里，说几句题外话，上次看到php maillist提到的使得php的错误处理机制完全oo化，也就是，改写这个函数句柄，使得每当有错误发生的时候，都throw一个异常。而cgi只是简单的调用了php提供的错误处理函数。10. 这个函数会在我们调用php的header()函数的时候被调用，对于cgi来说，不提供。11. sapi_cgi_send_headers,&nbsp;&nbsp;这个函数会在要真正发送header的时候被调用，一般来说，就是当有任何的输出要发送之前：</span><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">int</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_send_headers</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_headers_struct</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_headers</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_dc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buf</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">[</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_max_header_length</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">]</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_header_struct</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">h</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">zend_llist_position</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">pos</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request_info</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">.</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">no_headers</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;==&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">1</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_header_sent_successfully</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">cgi_nph</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;||&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_headers</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">.</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">http_response_code</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;!=&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">200</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">int</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">rfc2616_headers</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&amp;&amp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_headers</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">.</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">http_status_line</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">snprintf</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buf</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_max_header_length</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">%s</font><font color=\"navy\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\\r\\n</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_headers</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">.</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">http_status_line</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&gt;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_max_header_length</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_max_header_length</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">else</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sprintf</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buf</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">status: %d</font><font color=\"navy\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\\r\\n</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_headers</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">.</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">http_response_code</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">phpwrite_h</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buf</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">h</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_header_struct</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">zend_llist_get_first_ex</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&amp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_headers</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">-&gt;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">headers</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">, &amp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">pos</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">while</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">h</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* prevent crlfcrlf */</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">h</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">-&gt;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">header_len</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">phpwrite_h</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">h</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">-&gt;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">header</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">h</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">-&gt;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">header_len</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">phpwrite_h</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"navy\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\\r\\n</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">2</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">h</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_header_struct</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">zend_llist_get_next_ex</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&amp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_headers</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">-&gt;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">headers</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">, &amp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">pos</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">phpwrite_h</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"navy\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\\r\\n</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">2</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_header_sent_successfully</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">12. null, 这个用来单独发送每一个header, cgi没有提供 13. sapi_cgi_read_post, 这个句柄指明了如何获取post的数据，如果做过cgi编程的话，我们就知道cgi是从stdin中读取post data的，</span><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">int</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_read_post</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buffer</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">uint</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">count_bytes</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_dc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">uint</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">=</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tmp_read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#if php_fastcgi</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">pos</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buffer</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#endif</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">count_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">min</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">count_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">uint</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request_info</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">.</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">content_length</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;-&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_post_bytes</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">))</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">while</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&lt;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">count_bytes</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#if php_fastcgi</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_is_fastcgi</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">())</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">server_context</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tmp_read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_read</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">pos</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">count_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;-&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_bytes</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">pos</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;+=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tmp_read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">else</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tmp_read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buffer</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;+&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">count_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;-&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_bytes</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#else</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tmp_read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buffer</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;+&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">count_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;-&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_bytes</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#endif</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tmp_read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&lt;=&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">break</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;+=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tmp_read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">14. sapi_cgi_read_cookies, 这个和上面的函数一样，只不过是去获取cookie值：</span><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_read_cookies</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_d</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgibin_getenv</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">((</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">http_cookie</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sizeof</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">http_cookie</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">-</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">1</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_cc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">15. sapi_cgi_register_variables,这个函数给了一个接口，用以给$_server变量中添加变量，对于cgi来说，注册了一个php_self,这样我们就可以在脚本中访问$_server[&#39;php_self&#39;]来获取本次的request_uri：</span><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">void</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_register_variables</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">zval</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">track_vars_array</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_dc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* in cgi mode, we consider the environment to be a part of the server<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp;&nbsp;* variables<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;&nbsp;*/</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_import_environment_variables</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">track_vars_array</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_cc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* build the special-case php_self variable for the cgi version */</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_register_variable</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_self</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request_info</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">.</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request_uri</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;?&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request_info</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">.</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request_uri</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;:&nbsp;</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;&quot;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">track_vars_array</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_cc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">16. sapi_cgi_log_message ，用来输出错误信息，对于cgi来说，只是简单的输出到stderr:</span><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">void</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_log_message</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">message</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#if php_fastcgi</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_is_fastcgi</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">()</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&amp;&amp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_logging</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_fetch</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">()</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">server_context</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">int</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">strlen</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">message</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buf</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">malloc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">+</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">2</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">memcpy</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buf</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">message</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">memcpy</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buf</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;+&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"navy\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\\n</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sizeof</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"navy\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\\n</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">))</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_write</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_stderr</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buf</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">+</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">1</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">free</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buf</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">else</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fprintf</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">stderr</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">%s</font><font color=\"navy\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\\n</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">message</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* ignore return code */</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">else</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#endif /* php_fastcgi */</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fprintf</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">stderr</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">%s</font><font color=\"navy\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\\n</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">message</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">经过分析，我们已经了解了一个sapi是如何实现的了， 分析过cgi以后，我们也就可以想象mod_php, embed等sapi的实现机制。 ：）</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">今天就到这里， 西班牙和中国加时了，呵呵，中国男篮还不错。。。。。。</span></p>', 1444301028, -1062731039, 5, 0, 60, 0, 5, 0, 0, NULL, 0, NULL, 0, '/public/index/images/5.jpg');
INSERT INTO `blog_form` (`id`, `uname`, `tid`, `aid`, `title`, `content`, `addtime`, `addip`, `classid`, `replycount`, `hits`, `istop`, `elite`, `ishot`, `rate`, `attachment`, `isdel`, `style`, `isdisplay`, `fphoto`) VALUES
(5, 'SINMON', 0, 5, '【架构与优化】从facebook中集思广益，相互学习', '<p style=\"word-wrap: break-word; margin: 0px; padding: 0px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 30px; text-indent: 2em;\">\r\n 本人才学疏浅，提出这个问题只是为了抛砖引玉，希望大家能在自己擅长的领域里对facebook中可能采用的某个技术或者架构方案或优化方法，做个自己的论述。根据2008年9月1日，腾讯网对facebook的技术运营副总裁<font face=\"宋体\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">jonathan heiliger的访问，我们了解到：</font></font><br style=\"word-wrap: break-word;\" />\r\n  <font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">（1）facebook自称全球流量第四的网站，每天9000万活跃用户访问facebook的1万台服务器。</font></font></font></font><br style=\"word-wrap: break-word;\" />\r\n <font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">（2）25tb数据（08年12月为28tb），40万名外部开发者支持，开发了2.5万套应用软件。</font></font></font></font><br style=\"word-wrap: break-word;\" />\r\n <font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">（3）<font color=\"#4e2727\" style=\"word-wrap: break-word;\"><font face=\"arial\" style=\"word-wrap: break-word;\">使用lamp（<font color=\"#ff0000\" style=\"word-wrap: break-word;\"><font color=\"#9900ff\" style=\"word-wrap: break-word;\">linux</font>、&nbsp;<font color=\"#0000ff\" style=\"word-wrap: break-word;\">apache</font>、<font color=\"#ff0000\" style=\"word-wrap: break-word;\">&nbsp;mysql</font>、&nbsp;</font><font color=\"#ff00ff\" style=\"word-wrap: break-word;\">php</font>）技术构架；数据库使用mysql；使用memcached缓存sql加速（全球最大的分布式memcached缓存，800多台服务器，光缓存在memcached中数据就达20多tb）；使用apc进行opcode编译缓存。关于php的编译执行如下图所示：</font></font></font></font></font></font></p>\r\n<p style=\"word-wrap: break-word; margin: 0px; padding: 0px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 30px; text-indent: 2em;\">\r\n  而facebook的缓存方案如下图所示：<br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n <font face=\"arial\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#4e2727\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">（4）<span style=\"word-wrap: break-word; font-weight: 700;\"><font face=\"arial\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word;\"><span style=\"word-wrap: break-word;\">一些后台应用是用python、<font color=\"#000000\" style=\"word-wrap: break-word;\">perl和java，以及一些gcc和boost。</font></span></font></font></span></font></font></font></font></p>\r\n<p>\r\n <font face=\"arial\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\"><font color=\"#000000\" style=\"word-wrap: break-word;\">（5）使用svn和git来进行代码管理，并且全部企业内部的软件部署都采用开源程序。</font></font></font></font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n &nbsp;</p>\r\n<p style=\"word-wrap: break-word; margin: 0px; padding: 0px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 30px; text-indent: 2em;\">\r\n <font face=\"verdana, helvetica, arial, sans-serif\" style=\"word-wrap: break-word;\"><font face=\"arial\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\"><span style=\"word-wrap: break-word; font-weight: 700;\"><font face=\"verdana, helvetica, arial, sans-serif\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 14px;\">2. 可能会采用的mysql架构与优化</font></font></span></font></font></font><br style=\"word-wrap: break-word;\" />\r\n <span style=\"word-wrap: break-word; font-weight: 700;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">（1）数据的垂直（无关联数据放置不同数据库服务器）与水平分割（库表散列，如用user_id散列），然后用mysql proxy/spock proxy进行分割表的反向代理。</font></font></span><br style=\"word-wrap: break-word;\" />\r\n  <font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">（2）合理使用变量，并在本地文件建立散列的映射关系，进一步进行分割。</font></font></font><br style=\"word-wrap: break-word;\" />\r\n <font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">（3）master/slave集群架构，实现读写分离。</font></font></font><br style=\"word-wrap: break-word;\" />\r\n  <font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">（4）合理的数据库结构设计，与索引优化</font></font></font></font></p>\r\n<p style=\"word-wrap: break-word; margin: 0px; padding: 0px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 30px; text-indent: 2em;\">\r\n <font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\">（5）其他：索引缓存、联合索引、查询缓存等。</font></font></p>\r\n<p style=\"word-wrap: break-word; margin: 0px; padding: 0px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 30px; text-indent: 2em;\">\r\n  &nbsp;</p>\r\n<p>\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font color=\"#000000\" style=\"word-wrap: break-word;\">3. 可能会采用的系统优化</font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font face=\"宋体\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font size=\"2\" style=\"word-wrap: break-word;\"><span style=\"word-wrap: break-word; font-weight: 700;\">（1）使用epoll模型</span></font></font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\">（2）异步i/o</font></font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\">（3）fastcgi或其他方法实现多进程</font></font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\">（4）sendfile系统调用增大网络i/o流量</font></font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font face=\"arial\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><span style=\"word-wrap: break-word; font-weight: 700;\"><font face=\"verdana\" style=\"word-wrap: break-word;\">4. 可能会采用的web架构或前端技术</font></span></font></font></font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font face=\"arial\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><span style=\"word-wrap: break-word; font-weight: 700;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\"><font color=\"#444444\" style=\"word-wrap: break-word;\">（1）web组件分离，如独立的图片服务器，javascript、css文件、动态脚本的分离。</font></font></font></span></font></font></font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font face=\"arial\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><span style=\"word-wrap: break-word; font-weight: 700;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\"><font color=\"#444444\" style=\"word-wrap: break-word;\">（2）nginx反向代理（或squid）</font></font></font></span></font></font></font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\">（3）多副本负载均衡</font></font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\">（4）http持久连接与合理利用浏览器缓存，例如背景图偏移量技术，及对css、javascript和视频的</font></font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#000000\" style=\"word-wrap: break-word;\">5. 一些可能会用也可能不用的压力测试</font></font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><span style=\"word-wrap: break-word;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\"><font color=\"#444444\" style=\"word-wrap: break-word;\">（1）apache的ab进行压力测试</font></font></font></span></font></font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\">（2）apache的prefork模式进行多进程切换的压力测试</font></font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\">（3）使用nginx为多进程下的cpu与io进行监控</font></font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font face=\"arial\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#000000\" style=\"word-wrap: break-word;\">linux下的memcached开发，请参看逆雪寒的文章</font></font></font><font face=\"arial\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><a href=\"http://bbs.phpchina.com/viewthread.php?tid=48667&amp;highlight=linux%2b%cf%c2%b5%c4%2bmemcached%2b%bf%aa%b7%a2\" style=\"word-wrap: break-word; color: rgb(30, 84, 127);\" target=\"_blank\">http://bbs.phpchina.com/viewthread.php?tid=48667&amp;highlight=linux%2b%cf%c2%b5%c4%2bmemcached%2b%bf%aa%b7%a2</a></font></font></font><br style=\"word-wrap: break-word;\" />\r\n  <font face=\"arial\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">memcached的分布式缓存机制及相关解决方案请阅读以下网址及相关文章：</font></font></font></font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font face=\"arial\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\"><a href=\"http://tech.idv2.com/2008/07/24/memcached-004/\" style=\"word-wrap: break-word; color: rgb(30, 84, 127);\" target=\"_blank\">http://tech.idv2.com/2008/07/24/memcached-004/</a></font></font></font></font></p>', 1444301117, -1062731039, 5, 10, 9, 0, 0, 0, 0, NULL, 0, NULL, 0, '/public/index/images/1.jpg');
INSERT INTO `blog_form` (`id`, `uname`, `tid`, `aid`, `title`, `content`, `addtime`, `addip`, `classid`, `replycount`, `hits`, `istop`, `elite`, `ishot`, `rate`, `attachment`, `isdel`, `style`, `isdisplay`, `fphoto`) VALUES
(6, 'SINMON', 0, 3, '树操作算法，非递归方法', '<p>\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">前些日子和一些朋友讨论关于无限分类的算法问题，其中提到了利用php数组进行操作的想法。其实无限分类算法就是树的算法。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">利用数据库存储数据加递归搜索似乎是目前很流行的一种方法，但这种方法的效率低下，并增加了不少数据库的负担。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">我这个算法采用文本方式存储数据，效率应该还可以。由于时间关系，算法是匆匆完成没有经过严格测试就放上来了，大家有兴趣的话就测试一下，找找其中的bug，或改善一下算法的性能。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">提醒一点，如果你的php可利用的内存不到1g，请不要尝试去创建一个具有100万个节点的树。。。:lol:</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">树的操作算法是各种高级数据结构算法的基础，估计不少同学在大学的时候都学烂了，所以我就不必细讲了。现在要讨论的是如何在php这个编程环境里面如果实现该算法最大的性能。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">好吧，我来抛砖引玉。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">因时间关系没有写注释，看不懂的同学可以提问。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">[php]</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&lt;?php</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/**</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">* 树操作类</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">* 利用php数组对树进行构造，删除和遍历等操作，全部遍历采用非递归方法实现，并实现iterator和countable操作。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">* 该算法可适用与无限分类等相关领域，对于同时操作百万级以上的数据可能需要512m以上的内存支持。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">* 利用文本存储数据结构，如果需要数据库存储可继承本类并覆盖loadtree和savetree方法。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">* @copyrihgt&nbsp;</span><a href=\"mailto:sentrychen@hotmail.com\" style=\"word-wrap: break-word; color: rgb(30, 84, 127); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sentrychen@hotmail.com</a><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">, 2008</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">* @author sentrychen&nbsp;</span><a href=\"mailto:sentrychen@hotmail.com\" style=\"word-wrap: break-word; color: rgb(30, 84, 127); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sentrychen@hotmail.com</a><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&gt;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">* @version $id: tree.php, v 0.0.1 2008/10/01 11:51:25 uw exp $</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*/</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">class itc_tree implements iterator,countable</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; const id = &#39;i&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; const pid = &#39;p&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; const level =&#39;l&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; const data = &#39;d&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; const children = &#39;c&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; const dfs = &#39;dfs&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; const bfs = &#39;bfs&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected $_tree = array();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected $_filename = &#39;&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected $_prefix = &#39;tree_&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected $_path = &#39;&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected $_rootid = 0;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected $_lastid = 0;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected $_way = self::dfs;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected $_stack = array();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function __construct($name, $path = &#39;&#39;)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;loadtree($name, $path);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function loadtree ($name, $path = &#39;&#39;)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if ($path != &#39;&#39;) {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (is_dir($path)) {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $this-&gt;_path = rtrim($path, &#39;/\\\\&#39;) . directory_separator;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;} else {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; die(&#39;no such directory :&#39; . $path);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$name = md5($name);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_filename = $this-&gt;_path . $this-&gt;_prefix . $name ;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (is_file($this-&gt;_filename)) {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_tree = json_decode(file_get_contents($this-&gt;_filename),true);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_inittree();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return true;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return false;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected function _inittree ()</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$ary = $this-&gt;listtotree($this-&gt;_tree);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_rootid = $ary[&#39;topid&#39;];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_lastid = $ary[&#39;lastid&#39;];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_tree[$this-&gt;_rootid][self::level] = 1;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $this;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function listtotree(&amp;$list){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$return = array(&#39;topid&#39;=&gt;0,&#39;lastid&#39;=&gt;0);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;foreach ($list as $id =&gt; &amp;$node){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; if (isset($list[$node[self::pid]]))</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$list[$node[self::pid]][self::children][$id] = &amp;$node;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; else</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$return[&#39;topid&#39;] = $id;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; if ($id &gt; $return[&#39;lastid&#39;]) $return[&#39;lastid&#39;] = $id;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $return;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function settreebylist (array $list)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (!$this-&gt;_checklist($list)){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;die(&#39;incorrect data format&#39;);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_tree = $list;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_inittree();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return true;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function gettree($id = null)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (null === $id) $id = $this-&gt;_rootid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id]))</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return $this-&gt;_tree[$id];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;else</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function getparent($id){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id]) &amp;&amp; isset($this-&gt;_tree[$this-&gt;_tree[$id][self::parent]])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return $this-&gt;_tree[$this-&gt;_tree[$id][self::parent]];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function getparentsid($start,$level = null)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {&nbsp; &nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$parent = array();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$id = $start;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;do{</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (!isset($this-&gt;_tree[$id])) break;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$pid = $this-&gt;_tree[$id][self::pid];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (null !== $level &amp;&amp; !$level--) break;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (!isset($this-&gt;_tree[$pid])) break;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;while(true);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $parent;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function getchildren($id){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return $this-&gt;_tree[$id][self::children];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function gettreeall()</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $this-&gt;_tree;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function gettreelist()</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree)) {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return $this-&gt;tolist($this-&gt;_tree);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function tolist($tree){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$ary = array();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;foreach ($tree as $id =&gt; $node){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;unset($node[self::children]);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$ary[$id] = $node;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $ary;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function getdepth(){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$depth = 1;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$id = $this-&gt;_rootid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$stack = array($id);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$i = 0;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (!isset($this-&gt;_tree[$id][self::level]))</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_tree[$id][self::level] = 1;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;do{</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$id = $stack[$i++];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$pid = $this-&gt;_tree[$id][self::pid];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id][self::children])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$stack = array_merge($stack,array_keys($this-&gt;_tree[$id][self::children]));&nbsp; &nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id][self::level])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $level = $this-&gt;_tree[$id][self::level];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;else {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $level = $this-&gt;_tree[$pid][self::level] + 1;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $this-&gt;_tree[$id][self::level] = $level;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if ($depth &lt; $level) $depth = $level;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}while(isset($stack[$i]));</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $depth;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function getlastid(){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $this-&gt;_lastid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function getrootid(){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $this-&gt;_rootid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function getroot(){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $this-&gt;_tree[$this-&gt;_rootid];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function getdata($id){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return $this-&gt;_tree[$id][self::data];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function setdata($id,$data){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_tree[$id][self::data] = $data;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return true;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return false;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function addroot($data = null)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$root = array(</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self::id =&gt; $this-&gt;_rootid,&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self::pid =&gt; $this-&gt;_rootid - 1,&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self::level =&gt; 1,</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self::data =&gt; $data</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;);&nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_tree[$this-&gt;_rootid] = &amp;$root;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_lastid = $this-&gt;_rootid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $this-&gt;_rootid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function addleaf($pid,$data = null)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (!isset($this-&gt;_tree[$pid])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (isset($this-&gt;_tree[$this-&gt;_rootid]))</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $pid = $this-&gt;_rootid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $this-&gt;_lastid = $this-&gt;addroot($data);&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; return $this-&gt;_lastid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$id = ++$this-&gt;_lastid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$level = isset($this-&gt;_tree[$pid][self::level])? $this-&gt;_tree[$pid][self::level] + 1 : null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_tree[$id] = array(</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self::id =&gt; $id,&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self::pid =&gt; $pid,&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self::level =&gt; $level,</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self::data =&gt; $data</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_tree[$pid][self::children][$id] = &amp;$this-&gt;_tree[$id];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $id;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function insertchild($pid, $children)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (!isset($this-&gt;_tree[$pid])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return false;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if ($children instanceof self){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$children = $children-&gt;gettree();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (is_array($children)){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $children = $this-&gt;tolist($children);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$lastid = $this-&gt;_lastid + 1;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$list = array();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;foreach ($children as $id =&gt; $node){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $node[self::id] +=$lastid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $node[self::pid] +=$lastid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $list[$id + $lastid] = $node;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$ary = $this-&gt;listtotree($list);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_lastid = $ary[&#39;lastid&#39;];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$list[$ary[&#39;topid&#39;]][self::pid] = $pid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_tree += $list;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_tree[$pid][self::children][$ary[&#39;topid&#39;]] = &amp;$this-&gt;_tree[$ary[&#39;topid&#39;]];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return $this-&gt;_lastid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $this-&gt;addleaf($pid,$children);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function deletechild($id){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (!isset($this-&gt;_tree[$id])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$pid = $this-&gt;_tree[$id][self::pid];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$deltree = array();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$pid])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;unset($this-&gt;_tree[$pid][self::children][$id]);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$stack = array($id);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;do{</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$id = array_pop($stack);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (isset($this-&gt;_tree[$id][self::children]))</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $stack =array_merge($stack, array_keys($this-&gt;_tree[$id][self::children]));</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$deltree[$id] = $this-&gt;_tree[$id];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;unset($this-&gt;_tree[$id]);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}while(!empty($stack));</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $deltree;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function emptytree(){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_tree = array();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_rootid = 0;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_lastid = 0;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return true;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function destroytree(){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;emptytree();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (is_file($this-&gt;_filename))</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;unlink($this-&gt;_filename);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return true;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected function _checklist (array $list)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$ischecked = true;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$topnum = 0;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;foreach ($list as $id =&gt; $node) {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (! isset($node[self::id]) || ! isset($node[self::pid]) || $node[self::id] != $id) {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $ischecked = false;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; break;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}else{</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; if (!isset($list[$node[self::pid]])) $topnum++;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; if ($topnum &gt; 1){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$ischecked = false;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;break;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $ischecked;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function getlevel($id){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id]) &amp;&amp; isset($this-&gt;_tree[$id][self::level]) )</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return $this-&gt;_tree[$id][self::level];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$level = 0;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$id2 = $id;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;while(isset($this-&gt;_tree[$id2])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (isset($this-&gt;_tree[$id2][self::level])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $level += $this-&gt;_tree[$id2][self::level];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; break;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$level++;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$id2 = $this-&gt;_tree[$id2][self::pid];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id]))</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_tree[$id][self::level] = $level;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $level;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function dfs($callback = null,$id = null){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (null === $id) $id = $this-&gt;_rootid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (!isset($this-&gt;_tree[$id])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (null == $callback || !function_exists($callback)){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$stack = array($id);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$return = null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;do{</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$id = array_shift($stack);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$children = null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id][self::children])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$children = array_keys($this-&gt;_tree[$id][self::children]);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$stack = array_merge($children,$stack);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$args = array(</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::id =&gt; $id,</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::pid =&gt; $this-&gt;_tree[$id][self::pid],</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::data =&gt; &amp;$this-&gt;_tree[$id][self::data],</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::level =&gt; $this-&gt;getlevel($id),</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::children =&gt; $children</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$back = call_user_func($callback,$args);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($back)){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (is_string($back)) $return .= $back;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else if (is_array($back)) $return[] = $back;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else if (is_int($back)) $return += $back;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else if (is_bool($back) &amp;&amp; $back) $return = $this-&gt;_tree[$id];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}while(!empty($stack));</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $return;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function bfs($callback = null,$id = null){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (null === $id) $id = $this-&gt;_rootid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (!isset($this-&gt;_tree[$id])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return array();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (null == $callback || !function_exists($callback)){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$callback = null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$stack = array($id);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$return = null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;do{</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$id = array_shift($stack);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$children = null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (isset($this-&gt;_tree[$id][self::children])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $children = array_keys($this-&gt;_tree[$id][self::children]);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $stack = array_merge($stack,$children);&nbsp; &nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}&nbsp; &nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$args = array(</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::id =&gt; $id,</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::pid =&gt; $this-&gt;_tree[$id][self::pid],</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::data =&gt; &amp;$this-&gt;_tree[$id][self::data],</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::level =&gt; $this-&gt;getlevel($id),</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::children =&gt; $children</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$return = call_user_func($callback,$args);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (isset($back)){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (is_string($back)) $return .= $back;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else if (is_array($back)) $return[] = $back;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else if (is_int($back)) $return += $back;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else if (is_bool($back) &amp;&amp; $back) $return = $this-&gt;_tree[$id];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}while(!empty($stack));</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $return;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function savetree(){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;file_put_contents($this-&gt;_filename, json_encode($this-&gt;tolist($this-&gt;_tree)));</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return true;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function setway($way = self::dfs){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (in_array($way,array(self::dfs,self::bfs))){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_way = $way;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;rewind();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $this;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function rewind()</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$this-&gt;_rootid]))</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;{</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_stack = array($this-&gt;_rootid);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;else{</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_stack = array();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $this;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function next()</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$id = array_shift($this-&gt;_stack);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id][self::children])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$children = array_keys($this-&gt;_tree[$id][self::children]);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if ($this-&gt;_way == self::bfs)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_stack = array_merge($this-&gt;_stack,$children);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;else</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_stack = array_merge($children,$this-&gt;_stack);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function count()</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return count($this-&gt;_tree);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function key()</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return current($this-&gt;_stack);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function current()</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$id = current($this-&gt;_stack);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return $this-&gt;_tree[$id];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;else</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function valid()</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return !empty($this-&gt;_stack);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">[/php]</span></p>', 1444301167, -1062731039, 5, 0, 2, 0, 7, 0, 0, NULL, 0, NULL, 0, '/public/index/images/3.jpg');
INSERT INTO `blog_form` (`id`, `uname`, `tid`, `aid`, `title`, `content`, `addtime`, `addip`, `classid`, `replycount`, `hits`, `istop`, `elite`, `ishot`, `rate`, `attachment`, `isdel`, `style`, `isdisplay`, `fphoto`) VALUES
(7, 'SINMON', 0, 4, '关于php你可能不知道的－php的事件驱动化设计', '<p>\r\n <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">最近在做一个需要用到异步php的项目， 翻阅php源码的时候，发现了三个没有用过的模块，sysvsem,sysvshm,sysvmsg,一番研究以后，受益非浅。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">在php中有这么一族函数，他们是对unix的v ipc函数族的包装。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">它们很少被人们用到，但是它们却很强大。巧妙的运用它们，可以让你事倍功半。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">它们包括：</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">信号量(semaphores)</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">共享内存(shared memory)</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">进程间通信(inter-process messaging, ipc)</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">基于这些，我们完全有可能将php包装成一基于消息驱动的系统。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">但是，首先，我们需要介绍几个重要的基础:</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">1. ftok</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n &nbsp;</p>\r\n<div class=\"blockcode\" style=\"word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); background: url(http://bbs.phpchina.com/template/yeei_dream1/css/yeei//codebg.gif) 0px 0px repeat-y rgb(247, 247, 247);\">\r\n  <div id=\"code_yc8\" style=\"word-wrap: break-word;\">\r\n    <ol style=\"word-wrap: break-word; margin: 0px 0px 0px 10px !important; padding-right: 0px !important; padding-left: 0px !important;\">\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">int ftok ( string pathname, string proj )</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">//ftok将一个路径名pathname和一个项目名(必须为一个字符), 转化成一个整形的用来使用系统v ipc的key</font></li>\r\n   </ol>\r\n </div>\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><span style=\"word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(30, 84, 127) !important;\">复制代码</span></font></div>\r\n<p>\r\n  <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">2. ticks</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ticks是从php 4.0.3开始才加入到php中的，它是一个在declare代码段中解释器每执行n条低级语句就会发生的事件。n的值是在declare中的directive部分用ticks=n来指定的。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n &nbsp;</p>\r\n<div class=\"blockcode\" style=\"word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); background: url(http://bbs.phpchina.com/template/yeei_dream1/css/yeei//codebg.gif) 0px 0px repeat-y rgb(247, 247, 247);\">\r\n  <div id=\"code_tni\" style=\"word-wrap: break-word;\">\r\n    <ol style=\"word-wrap: break-word; margin: 0px 0px 0px 10px !important; padding-right: 0px !important; padding-left: 0px !important;\">\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">function getstatus($arg){</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">print_r connection_status();</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&nbsp;debug_print_backtrace();</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">reigster_tick_function(&quot;getstatus&quot;, true);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">declare(ticks=1){</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&nbsp;for($i =1; $i&lt;999; $i++){</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&nbsp;echo &quot;hello&quot;;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&nbsp;}</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">unregister_tick_function(&quot;getstatus&quot;);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n   </ol>\r\n </div>\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><span style=\"word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(30, 84, 127) !important;\">复制代码</span></font></div>\r\n<p>\r\n  <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">这个就基本相当于：</font></p>\r\n<div class=\"blockcode\" style=\"word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); background: url(http://bbs.phpchina.com/template/yeei_dream1/css/yeei//codebg.gif) 0px 0px repeat-y rgb(247, 247, 247);\">\r\n <div id=\"code_s5l\" style=\"word-wrap: break-word;\">\r\n    <ol style=\"word-wrap: break-word; margin: 0px 0px 0px 10px !important; padding-right: 0px !important; padding-left: 0px !important;\">\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">function getstatus($arg){</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">print_r connection_status();&nbsp;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">debug_print_backtrace();</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">reigster_tick_function(&quot;getstatus&quot;, true);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">declare(ticks=1){</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">for($i =1; $i&lt;999; $i++){</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">echo &quot;hello&quot;; getstatus(true);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">unregister_tick_function(&quot;getstatus&quot;);</font></li>\r\n   </ol>\r\n </div>\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><span style=\"word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(30, 84, 127) !important;\">复制代码</span></font></div>\r\n<p>\r\n  <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">消息，我现在用一个例子来说明，如何结合ticks来实现php的消息通信。</font></p>\r\n<div class=\"blockcode\" style=\"word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); background: url(http://bbs.phpchina.com/template/yeei_dream1/css/yeei//codebg.gif) 0px 0px repeat-y rgb(247, 247, 247);\">\r\n  <div id=\"code_ih5\" style=\"word-wrap: break-word;\">\r\n    <ol style=\"word-wrap: break-word; margin: 0px 0px 0px 10px !important; padding-right: 0px !important; padding-left: 0px !important;\">\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">$mesg_key = ftok(__file__, &#39;m&#39;);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">$mesg_id = msg_get_queue($mesg_key, 0666);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">function fetchmessage($mesg_id){</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if(!is_resource($mesg_id)){</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">print_r(&quot;mesg queue is not ready&quot;);&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if(msg_receive($mesg_id, 0, $mesg_type, 1024, $mesg, false, msg_ipc_nowait)){&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">print_r(&quot;process got a new incoming msg: $mesg &quot;);&nbsp;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">register_tick_function(&quot;fetchmessage&quot;, $mesg_id);&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">declare(ticks=2){&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">$i = 0;&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">while(++$i &lt; 100){&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if($i%5 == 0){&nbsp;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">msg_send($mesg_id, 1, &quot;hi: now index is :&quot;. $i);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">//msg_remove_queue($mesg_id);</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n   </ol>\r\n </div>\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><span style=\"word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(30, 84, 127) !important;\">复制代码</span></font></div>\r\n<p>\r\n  <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">在这个例子中，首先将我们的php执行process加入到一个由ftok生成的key所获得的消息队列中。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">然后，通过ticks，没隔俩个语句，就去查询一次消息队列。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">然后模拟了消息发送。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">在浏览器访问这个脚本，结果如下：</font></p>\r\n<div class=\"blockcode\" style=\"word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); background: url(http://bbs.phpchina.com/template/yeei_dream1/css/yeei//codebg.gif) 0px 0px repeat-y rgb(247, 247, 247);\">\r\n  <div id=\"code_yb2\" style=\"word-wrap: break-word;\">\r\n    <ol style=\"word-wrap: break-word; margin: 0px 0px 0px 10px !important; padding-right: 0px !important; padding-left: 0px !important;\">\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:19:&quot;hi: now index is :5&quot;;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :10&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :15&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :20&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :25&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :30&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :35&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :40&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :45&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :50&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :55&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :60&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :65&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :70&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :75&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :80&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :85&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :90&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :95&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n   </ol>\r\n </div>\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><span style=\"word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(30, 84, 127) !important;\">复制代码</span></font></div>\r\n<p>\r\n  <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">看到这里是不是，大家已经对怎么模拟php为事件驱动已经有了一个概念了？ 别急，我们继续完善。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">2. 信号量</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">信号量的概念，大家应该都很熟悉。通过信号量，可以实现进程通信，竞争等。 再次就不赘述了，只是简单的列出php中提供的信号量函数集。</font></p>\r\n<div class=\"blockcode\" style=\"word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); background: url(http://bbs.phpchina.com/template/yeei_dream1/css/yeei//codebg.gif) 0px 0px repeat-y rgb(247, 247, 247);\">\r\n <div id=\"code_xt5\" style=\"word-wrap: break-word;\">\r\n    <ol style=\"word-wrap: break-word; margin: 0px 0px 0px 10px !important; padding-right: 0px !important; padding-left: 0px !important;\">\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sem_acquire -- acquire a semaphore</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sem_get -- get a semaphore id</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sem_release -- release a semaphore</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sem_remove -- remove a semaphore</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n   </ol>\r\n </div>\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><span style=\"word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(30, 84, 127) !important;\">复制代码</span></font></div>\r\n<p>\r\n  <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">具体信息，可以翻阅php手册。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">3. 内存共享</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php sysvshm提供了一个内存共享方案:sysvshm，它是和sysvsem,sysvmsg一个系列的，但在此处，我并没有使用它，我使用的shmop系列函数，结合ticks</font></p>\r\n<div class=\"blockcode\" style=\"word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); background: url(http://bbs.phpchina.com/template/yeei_dream1/css/yeei//codebg.gif) 0px 0px repeat-y rgb(247, 247, 247);\">\r\n <div id=\"code_qxu\" style=\"word-wrap: break-word;\">\r\n    <ol style=\"word-wrap: break-word; margin: 0px 0px 0px 10px !important; padding-right: 0px !important; padding-left: 0px !important;\">\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&lt;?php</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">function memoryusage(){ &nbsp; &nbsp; &nbsp; &nbsp; printf(&quot;%s: %s&lt;br/&gt;&quot;, date(&quot;h:i:s&quot;, $now), memory_get_usage());</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; &nbsp; &nbsp; //var_dump(debug_backtrace());</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; &nbsp; &nbsp; //var_dump(__function__);</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; &nbsp; &nbsp; //debug_print_backtrace();</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">register_tick_function(&quot;memoryusage&quot;);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">declare(ticks=1){</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $shm_key = ftok(__file__, &#39;s&#39;);</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; &nbsp; &nbsp; $shm_id = shmop_open($shm_key, &#39;c&#39;, 0644, 100);</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">printf(&quot;size of shared memory is: %s&lt;br/&gt;&quot;, shmop_size($shm_id));</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">$shm_text = shmop_read($shm_id, 0, 100);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">eval($shm_text);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if(!empty($share_array)){</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; &nbsp; &nbsp; var_dump($share_array);</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; &nbsp; &nbsp; $share_array[&#39;id&#39;] += 1;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}else{</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; &nbsp; &nbsp; $share_array = array(&#39;id&#39; =&gt; 1);</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">$out_put_str = &quot;$share_array = &quot; . var_export($share_array, true) .&quot;;&quot;;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">$out_put_str = str_pad($out_put_str, 100, &quot; &quot;, str_pad_right);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">shmop_write($shm_id, $out_put_str, 0);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">?&gt;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n   </ol>\r\n </div>\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><span style=\"word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(30, 84, 127) !important;\">复制代码</span></font></div>\r\n<p>\r\n  <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">运行这个例子，不断刷新，我们可以看到index在递增。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">单单使用这个shmop就能完成一下，php脚本之间共享数据的功能：以及，比如缓存，计数等等。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  &nbsp;</p>', 1444301218, -1062731039, 5, 0, 35, 1, 1, 0, 0, NULL, 0, 'red', 0, '/public/index/images/5.jpg');
INSERT INTO `blog_form` (`id`, `uname`, `tid`, `aid`, `title`, `content`, `addtime`, `addip`, `classid`, `replycount`, `hits`, `istop`, `elite`, `ishot`, `rate`, `attachment`, `isdel`, `style`, `isdisplay`, `fphoto`) VALUES
(8, 'SINMON', 0, 5, '本论坛超管的账号、密码都为admin', '<p>\r\n 操作步骤：</p>\r\n<p>\r\n  1 先登陆到会员中心；</p>\r\n<p>\r\n  2 点击右上角&ldquo;管理中心&rdquo;再次登陆，即可进入后台操作界面；</p>', 1444301395, -1062731039, 5, 0, 5, 0, 0, 0, 0, NULL, 0, 'red', 0, '/public/index/images/'),
(29, '陈江', NULL, 28, '这是测试的帖子', '这是测试的帖子\r\n欢迎检测', 1514626617, NULL, NULL, 0, 0, 0, 0, 0, 0, NULL, 0, NULL, 0, './public/upload/17/12/up_5a475e39653a6.png'),
(33, '这是测试', NULL, 44, 'wwww', 'wwwwwww', 1514723348, NULL, NULL, 0, 3, 0, 0, 0, 0, NULL, 0, NULL, 0, './public/upload/17/12/up_5a48d8141cde4.jpg'),
(32, '刘浩辰', NULL, 33, 'PHP开发文档', '抱歉！没有哦', 1514637766, NULL, NULL, 0, 0, 0, 0, 0, 0, NULL, 0, NULL, 0, './public/upload/17/12/up_5a4789c6da3f7.jpg'),
(34, 'SINMON', NULL, 2, '444', '4444', 1514799047, NULL, NULL, 0, 6, 0, 0, 0, 0, NULL, 0, NULL, 0, './public/upload/18/01/up_5a49ffc76dcf8.png'),
(35, 'SINMON', NULL, 2, '3鹅鹅鹅饿饿', '鹅鹅鹅饿饿', 1514855251, NULL, NULL, 0, 0, 0, 0, 0, 0, NULL, 0, NULL, 0, './public/upload/18/01/up_5a4adb531f22c.jpg'),
(36, '刘猛123', NULL, 45, '我是123', '22222', 1514855501, NULL, NULL, 0, 4, 0, 0, 0, 0, NULL, 0, NULL, 0, './public/upload/18/01/up_5a4adc4d8a184.jpg'),
(37, '刘猛123', NULL, 45, '大家好', '我是李萌', 1514877850, NULL, NULL, 0, 6, 0, 0, 0, 0, NULL, 0, NULL, 0, './public/upload/18/01/up_5a4b339a8038c.png');

-- --------------------------------------------------------

--
-- 表的结构 `blog_ly`
--

CREATE TABLE `blog_ly` (
  `lid` int(10) UNSIGNED NOT NULL,
  `username` varchar(50) DEFAULT NULL,
  `lctime` int(20) DEFAULT NULL,
  `neirong` varchar(500) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

--
-- 转存表中的数据 `blog_ly`
--

INSERT INTO `blog_ly` (`lid`, `username`, `lctime`, `neirong`) VALUES
(24, 'SINMON', 1514855286, 'uuuu'),
(15, '刘猛', 1514636630, '博主你好'),
(20, '刘猛', 1514636927, '我是刘猛大家好'),
(21, '刘浩辰', 1514637712, '我是刘浩辰'),
(23, 'SINMON', 1514806102, 'ddd'),
(25, '刘猛123', 1514855526, '博主你好');

-- --------------------------------------------------------

--
-- 表的结构 `blog_reply`
--

CREATE TABLE `blog_reply` (
  `rid` int(10) NOT NULL,
  `username` varchar(20) NOT NULL,
  `tid` int(10) DEFAULT NULL,
  `uid` int(10) NOT NULL,
  `content` mediumtext,
  `addtime` int(12) DEFAULT NULL,
  `addip` int(12) DEFAULT NULL,
  `isdel` tinyint(2) DEFAULT '0',
  `isdisplay` tinyint(2) DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- 转存表中的数据 `blog_reply`
--

INSERT INTO `blog_reply` (`rid`, `username`, `tid`, `uid`, `content`, `addtime`, `addip`, `isdel`, `isdisplay`) VALUES
(1, '僵小鱼1', 1, 4, '我是小鱼儿', 1510320318, NULL, 1, 0),
(73, '刘猛', 1, 1, 'zend整体用纯c实现，是php的内核部分，它将php代码翻译', 1510319070, NULL, 0, 0),
(74, 'SINMON', 1, 2, '围绕着zend引擎，extensions通过组件式的方式提供各种基础服务，我们常见的各种内置函数', 1510320260, NULL, 0, 0),
(75, '刘翔', 1, 3, 'sapi全称是server application programming interface，也就是服务端应用编程接口，sapi通过一系列钩子函数，', 1510320278, NULL, 0, 0),
(76, 'SINMON', 1, 2, '通过不同的sapi方式得到各种各样的应用模式，如通过webserver实现web应', 1510320318, NULL, 0, 0),
(78, 'SINMON', 8, 2, '我是管理员！！', 1514535690, NULL, 0, 0),
(95, '陈江', 5, 28, '架构师', 1514538419, NULL, 0, 0),
(97, '刘猛123', 36, 45, '44444', 1514855512, NULL, 0, 0),
(98, '刘猛123', 37, 45, '555555', 1514877864, NULL, 0, 0);

-- --------------------------------------------------------

--
-- 表的结构 `blog_user`
--

CREATE TABLE `blog_user` (
  `uid` int(10) NOT NULL,
  `username` varchar(50) DEFAULT NULL,
  `password` varchar(32) NOT NULL,
  `type` int(2) DEFAULT NULL,
  `phone` varchar(50) DEFAULT NULL,
  `ctime` int(50) DEFAULT NULL,
  `allowlogin` int(2) DEFAULT '0',
  `place` varchar(50) DEFAULT NULL,
  `birthday` int(50) DEFAULT NULL,
  `autoph` text,
  `email` varchar(50) DEFAULT NULL,
  `photo` varchar(100) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

--
-- 转存表中的数据 `blog_user`
--

INSERT INTO `blog_user` (`uid`, `username`, `password`, `type`, `phone`, `ctime`, `allowlogin`, `place`, `birthday`, `autoph`, `email`, `photo`) VALUES
(1, '刘猛', 'ec124ab1776421e93a4952297da142af', 0, '17862851395', 1510206775, 0, '山东', 1510218058, '　人生天地间，若白驹之过客，奔波忙碌都是为了抵达，有沉沉浮浮，也会有海阔天空的美好，恩怨是非，也终是云淡风轻的历练，花开花落轮回间，风景在辗转，总有些留不住的，也总有抵达不了的，淡定豁达才会释然，内心明朗才会踏实快乐。\r\n\r\n　　佛说：柔和者，自然善良。大度者，自然超脱。深远者，自然开阔。有容者，自然喜悦。\r\n\r\n　　人活着，心中要种一轮太阳，在寒冷的日子里用来取暖，在黑暗的日子里用来照亮，在迷茫的日子里用来指引方向，生活并非事事如意，不是所有的期待都符合想像，也不是所有的珍惜，都会再无离散。有的时候你想单纯，但是这个世界太复杂，有时候，你以经很努力了，依然得不到别人的认可，有时候你坦诚相对，还是会得到别人的质疑，于是你消沉，你气馁，觉得前路迷茫。', '2991326381@qq.com', './public/upload/18/01/up_5a49d26b1030d.jpg'),
(2, 'SINMON', 'e10adc3949ba59abbe56e057f20f883e', 1, '17611134695', 1510218315, 0, '河南', 1510185600, '若有风来，便等风来', '142152550@qq.com', './public/upload/18/01/up_5a4b2ffdc4717.jpg'),
(3, '刘翔', '25f9e794323b453885f5181f1b624d0b', 0, '15106630449', 1510207106, 0, '北京', 1510218058, '　人生天地间，若白驹之过客，奔波忙碌都是为了抵达，有沉沉浮浮，也会有海阔天空的美好，恩怨是非，也终是云淡风轻的历练，花开花落轮回间，风景在辗转，总有些留不住的，也总有抵达不了的，淡定豁达才会释然，内心明朗才会踏实快乐。\r\n\r\n　　佛说：柔和者，自然善良。大度者，自然超脱。深远者，自然开阔。有容者，自然喜悦。\r\n\r\n　　人活着，心中要种一轮太阳，在寒冷的日子里用来取暖，在黑暗的日子里用来照亮，在迷茫的日子里用来指引方向，生活并非事事如意，不是所有的期待都符合想像，也不是所有的珍惜，都会再无离散。有的时候你想单纯，但是这个世界太复杂，有时候，你以经很努力了，依然得不到别人的认可，有时候你坦诚相对，还是会得到别人的质疑，于是你消沉，你气馁，觉得前路迷茫。', '67843114@qq.com', NULL),
(4, '僵小鱼1', '25f9e794323b453885f5181f1b624d0b', 0, '17611134695', 1510212743, 0, '河北', 1510099200, '　人生天地间，若白驹之过客，奔波忙碌都是为了抵达，有沉沉浮浮，也会有海阔天空的美好，恩怨是非，也终是云淡风轻的历练，花开花落轮回间，风景在辗转，总有些留不住的，也总有抵达不了的，淡定豁达才会释然，内心明朗才会踏实快乐。\r\n\r\n　　佛说：柔和者，自然善良。大度者，自然超脱。深远者，自然开阔。有容者，自然喜悦。\r\n\r\n　　人活着，心中要种一轮太阳，在寒冷的日子里用来取暖，在黑暗的日子里用来照亮，在迷茫的日子里用来指引方向，生活并非事事如意，不是所有的期待都符合想像，也不是所有的珍惜，都会再无离散。有的时候你想单纯，但是这个世界太复杂，有时候，你以经很努力了，依然得不到别人的认可，有时候你坦诚相对，还是会得到别人的质疑，于是你消沉，你气馁，觉得前路迷茫。', '1421525520@qq.com', NULL),
(44, '这是测试', 'dd9d21e22391090ddce7c6ed58c6412d', NULL, '17611134695', 1514723328, 0, NULL, NULL, NULL, '2991326381@qq.com', NULL),
(45, '刘猛123', 'e10adc3949ba59abbe56e057f20f883e', NULL, '17611134695', 1514855471, 0, '上单', NULL, '', '2991326381@qq.com', './public/upload/18/01/up_5a4b3321b37d8.jpg'),
(46, '哈哈', '3b0f796e863a9ac1228b11758874af70', NULL, '17611134695', 1514879138, 0, NULL, NULL, NULL, '2991326381@qq.com', './public/upload/18/01/up_5a4b39729b315.jpg');

--
-- Indexes for dumped tables
--

--
-- Indexes for table `blog_form`
--
ALTER TABLE `blog_form`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `blog_ly`
--
ALTER TABLE `blog_ly`
  ADD PRIMARY KEY (`lid`);

--
-- Indexes for table `blog_reply`
--
ALTER TABLE `blog_reply`
  ADD PRIMARY KEY (`rid`);

--
-- Indexes for table `blog_user`
--
ALTER TABLE `blog_user`
  ADD PRIMARY KEY (`uid`);

--
-- 在导出的表使用AUTO_INCREMENT
--

--
-- 使用表AUTO_INCREMENT `blog_form`
--
ALTER TABLE `blog_form`
  MODIFY `id` int(10) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=38;
--
-- 使用表AUTO_INCREMENT `blog_ly`
--
ALTER TABLE `blog_ly`
  MODIFY `lid` int(10) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=26;
--
-- 使用表AUTO_INCREMENT `blog_reply`
--
ALTER TABLE `blog_reply`
  MODIFY `rid` int(10) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=99;
--
-- 使用表AUTO_INCREMENT `blog_user`
--
ALTER TABLE `blog_user`
  MODIFY `uid` int(10) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=47;COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
